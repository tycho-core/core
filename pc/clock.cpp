//////////////////////////////////////////////////////////////////////////////
// Tycho Game Library
// Copyright (C) 2008 Martin Slater
// Created : Sunday, 27 April 2008 3:19:29 AM
//////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////
// INCLUDES
//////////////////////////////////////////////////////////////////////////////
#include "core/clock.h"
#include "core/pc/safe_windows.h"
#include "MMSystem.h"

//////////////////////////////////////////////////////////////////////////////
// CLASS
//////////////////////////////////////////////////////////////////////////////
namespace tycho
{
namespace core
{

	//------------------------------------------------------------------------------------

	core::uint32 start_time  = 0;
	void clock::initialise()
	{
		timeBeginPeriod(1);
		start_time = timeGetTime();
	}

	//------------------------------------------------------------------------------------	
	
	float64 clock::get_time()
	{
		return (float64)(timeGetTime() - start_time) / 1000.0f;
	}

	//------------------------------------------------------------------------------------

	int64 clock::get_system_time()
	{
		return time(0);
	}

	//------------------------------------------------------------------------------------

} // end namespace
} // end namespace
